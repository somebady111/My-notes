# 第四周工作总结

[TOC]

#### 当前进度：

> 测试+修改程序bug+完善表格插入+向硬件端发送消息（working...）

#### 本周学习计划：

|   学习内容   |     学习周期     |
| :----------: | :--------------: |
|   数据分析   |      1-2周       |
|   mqtt语法   |       本周       |
| 报告格式学习 | 看结果，不计时间 |

####本周任务：

|            任务名称             | 任务周期 |       任务完成度       |
| :-----------------------------: | :------: | :--------------------: |
|    mqtt客户端服务端连接测试     |  本周内  |      本周测试完成      |
| commonddate警报表调取发送服务端 |  本周内  | 断网从下周开始进行调试 |
|      周总结月总结格式学习       |  本周内  |          完成          |
|       currentdate表新字段       |  本周内  |          完成          |

####出现问题：

|            问题名称             |                   解决方案                   |
| :-----------------------------: | :------------------------------------------: |
|      第三张表不能正确插入       |          更改数据库表curdata表字段           |
|     commanddata表的读取方案     | 1.读取flage为0的数据2.并对flage值进行修改为1 |
| 布尔值转换（1.丢失头部存在的0） |             1.判断长度，大位补0              |

#### 程序测试：

|           测试程序名称            |       测试时间       |              测试内容               |                           测试结果                           |                           改进方案                           |               测试总结               |
| :-------------------------------: | :------------------: | :---------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------------------------: |
|         curdata表插入测试         |       2019-5-6       | 1.cs16-cs46字段插入2.mac为111111888 | 1.日志时间正确2.插数据库时间正确，到cs42的数据插入正确，之后的数据不能插入3.调整表结构后插入成功 | 1.逐个插入检验插入情况2.修改表结构3.sql1和sql2在同一个异常判断中整理 | 1.测试后时间改善一条数据用时：0.029s |
| commanddata表读取返回给服务端测试 |          -           |                  -                  |                              -                               |                              -                               |                  -                   |
|   getdata表的插入数值正确度测试   | 2019-5-9   2019-5-10 |     原始数据转换后的数值正确性      |               数据正确（整型，浮点型，布尔型）               |                  1.布尔值判断长度，大位补0                   |       1.浮点数约到小数点后四位       |

#### 程序更改方案：

|         程序          |             更改方案             |
| :-------------------: | :------------------------------: |
| project.py-->状态转换 |      更改布尔型数据转换方案      |
| project.py-->十六进制 | 更改十六进制保存小数点后四位方案 |

> ######测试数据
>
> `test1`
>
> 1.原始数据：['FFFF000300030004000500060007000841100069412000D24130013B414001A34150020C41600275417002DE418001A3418801D84190020C4198044D41A0048141A804B641B004EA41B8051F41C0055341C8058841D005BC41D805F041E0062541E8065941F0068E41F806C20007', 'Fri May 10 10:09:56 2019\\n', '', '777253250', '89860403101892693073', '', 'x:', '', 'x:']
>
> 2.转换数据：111 777253250 222 2019-05-10 10:10:06 65535 3 3 4 5 6 7 8 9.0001 10.0002 11.0003 12.0004 13.0005 14.0006 15.0007 16.0008 17.0009 18.0010 19.0021 20.0022 21.0023 22.0024 23.0025 24.0026 25.0027 26.0028 27.0029 28.0030 29.0031 30.0032 31.0033 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1
>
> `test2`
>
> 1.原始数据：['FFFF000300030004000500060007000841100069412000D24130013B414001A34150020C41600275417002DE418001A3418801D84190020C4198044D41A0048141A804B641B004EA41B8051F41C0055341C8058841D005BC41D805F041E0062541E8065941F0068E41F806C20007', 'Fri May 10 10:09:46 2019\\n', '', '777253250', '89860403101892693073', '', 'x:', '', 'x:']
>
> 2.转换数据：111 777253250 222 2019-05-10 10:09:46 65535 3 3 4 5 6 7 8 9.0001 10.0002 11.0003 12.0004 13.0005 14.0006 15.0007 16.0008 17.0009 18.0010 19.0021 20.0022 21.0023 22.0024 23.0025 24.0026 25.0027 26.0028 27.0029 28.0030 29.0031 30.0032 31.0033 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1

####周工作总结：

|              工作名称               |   工作进度    |                             备注                             |
| :---------------------------------: | :-----------: | :----------------------------------------------------------: |
|         curdata表插入新字段         |     完成      |                   注意插入字段和数据库匹配                   |
| 从commanddata表读取数据返回给服务端 |  working...   | 从commanddata表中读取flag=1字段的信息，并对flag值进行修改为0，预计出现的问题：1.数据库插入和更新同时进行出现的数据库异常，解决方案为加数据库锁 |
|       project模块数据测试整改       | 完成待测试... |            整型，浮点型测试完成，布尔型待测试数值            |

####下周计划：

|          计划名称          |     计划周期     |                           计划内容                           |
| :------------------------: | :--------------: | :----------------------------------------------------------: |
|          上线部署          |     不设时间     |          流程+数据环境+用户账号+初始化步骤+指导手册          |
|      日志远程改进方案      |     下周周内     |                       具体内容根据进度                       |
|          程序打包          |     下周周内     |                       具体内容根据进度                       |
|        传输数据加密        |     下周周内     | 1.对接收的数据进行解密，2.对发送给硬件端的数据进行sha1或者md5加密 |
| 传输预备方案（套接字传输） | 下周开始部分研究 |        1.异步服务器的编写（一个线程中控制N个会话）2.         |

#### GET到的知识点：

`mysql数据库中游标的作用`

> 游标实际上是一种能从包括多条数据记录的结果集中每次提取一条记录的机制。游标充当指针的作用。尽管游标能遍历结果中的所有行，但他一次只指向一行。
>
> 概括来讲，SQL的游标是一种临时的数据库对象，即可以用来存放在数据库表中的数据行副本，也可以指向存储在数据库中的数据行的指针。游标提供了在逐行的基础上操作表中数据的方法。
>
> 游标的一个常见用途就是保存查询结果，以便以后使用。游标的结果集是由SELECT语句产生，如果处理过程需要重复使用一个记录集，那么创建一次游标而重复使用若干次，比重复查询数据库要快的多。

`使用pycharm部署项目到服务器`

> 1.云主机
>
> 2.python3.6.4
>
> `3.pycharm部署`
>
> ​	1.云服务器创建一个目录，放置项目文件，mkdir/data/项目名称 来创建项目
>
> ​	2.pycharm专业版，tool-->Deployment-->configration ,添加一个配置，名字随意（根据项目名称来识别）
>
> ​	3.上传项目，tool-->Deployment-->Upload to wxrobot
>
> ​	4.下载必须库
>

